replicaCount: 1

image:
  repository: aadan1lov/muffin-currency
  tag: "1.0.0"
  pullPolicy: IfNotPresent

nameOverride: "muffin-currency"


service:
  type: ClusterIP
  port: 8083
  portName: http

containerPort: 8080

livenessProbe:
  httpGet:
    path: /rate?from=PLAIN&to=CHOKOLATE
    port: 8080
    initialDelaySeconds: 5
    periodSeconds: 10
readinessProbe:
  httpGet:
    path: /rate?from=PLAIN&to=CHOKOLATE
    port: 8080
    initialDelaySeconds: 2
    periodSeconds: 5
  
destinationRule:
  name: muffin-currency-dr
  maxConnections: 10
  http1MaxPendingRequests: 1
  maxRequestsPerConnection: 1
  consecutive5xxErrors: 4
  interval: 1s
  baseEjectionTime: 1m
  maxEjectionPercent: 100

virtualService:
  name: muffin-currency-internal-vs
  http:
    timeout: 2s
    retries:
      attempts: 3
      perTryTimeout: 2s
      retryOn: gateway-error,connect-failure,refused-stream,5xx
